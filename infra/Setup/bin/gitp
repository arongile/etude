#!/bin/sh

#   gp "added stuff" -> git add -A && git commit -m "added stuff" && git push
#   gp -f "added stuff" -> git add -A && git commit -m "added stuff" --amend && git push --force

message=""  # Default to empty message
force=""    # Default to empty
amend=""    # Default to empty

# Parse options to the `pip` command
while getopts ":ha" opt; do
  case ${opt} in
    h )
      echo "Usage:"
      echo "    gp  -h                      Display this help message."
      echo "    gp  \"commit message\"      adds message and pushs"
      echo "    gp  -a \"commit message\"   amends and pushs"
      exit 0
      ;;
    a )
      force="--force"
      amend="--amend"
      ;;
   \? )
     echo "Invalid Option: -$OPTARG" 1>&2
     exit 1
     ;;
  esac
done
shift $((OPTIND -1))

if [ "$1" != "" ]; then
  message="-m \"$1\""
fi

cmd="git add -A && git commit $message $amend && git push $force"
echo ""
echo $cmd
echo ""
eval $cmd